<?xml version="1.0" encoding="UTF-8" ?>
<definition xmlns="http://workflow.opencastproject.org">

  <id>test-partial-import</id>
  <title>Arne testet partial import</title>
  <tags>
    <tag>upload</tag>
  </tags>
  <displayOrder>1000</displayOrder>
  <description>
    Test Description Partial Import
  </description>

  <configuration_panel>
    <![CDATA[
      <div id="workflow-configuration">
        <input id="publish" name="publish" type="checkbox" class="configField" value="true" checked=checked />
        <label for="publish">Publish media directly</label>
      </div>
    ]]>
  </configuration_panel>

  <operations>
    <!-- Used before partial-import as recommended by the docs-->
    <operation
        id="inspect"
        fail-on-error="true"
        exception-handler-workflow="error"
        description="Inspecting mediapackage track elements">
      <configurations>
        <configuration key="overwrite">false</configuration>
        <configuration key="accept-no-media">false</configuration>
        <configuration key="accurate-frame-count">true</configuration>
      </configurations>
    </operation>

    <operation id="partial-import"
               description="Post-processing raw audio and video files from capture agent"
               fail-on-error="true"
               exception-handler-workflow="partial-error">
      <configurations>
        <configuration key="source-presenter-flavor">presenter/source</configuration>
        <configuration key="source-smil-flavor">smil/source+partial</configuration>
        <configuration key="target-presentation-flavor">presentation/unified</configuration>
        <configuration key="target-presenter-flavor">presenter/IntoTheGarbage</configuration>
        <configuration key="concat-encoding-profile">concat.work</configuration>
        <configuration key="trim-encoding-profile">trim.work</configuration>
        <configuration key="force-encoding-profile">editor.work</configuration>
        <configuration key="preencode-encoding">true</configuration>
        <configuration key="preencode-encoding-profile">editor.work</configuration>
      </configurations>
    </operation>

    <operation
        id="tag"
        description="Tagging source material for archival">
      <configurations>
        <configuration key="source-flavors">*/*</configuration>
        <configuration key="target-tags">+archive</configuration>
      </configurations>
    </operation>

    <operation
        id="snapshot"
        fail-on-error="true"
        exception-handler-workflow="partial-error"
        description="Archiving">
      <configurations>
        <configuration key="source-tags">archive</configuration>
      </configurations>
    </operation>

  </operations>

</definition>
